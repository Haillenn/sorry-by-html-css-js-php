<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Website Xin L·ªói</title>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body {
            background-color: #f8f9fa;
            text-align: center;
            padding-top: 50px;
        }

        .heart {
            color: red;
            font-size: 2rem;
            animation: fall 3s linear infinite;
            position: absolute;
        }

        @keyframes fall {
            0% { transform: translateY(-100px); opacity: 1; }
            100% { transform: translateY(800px); opacity: 0; }
        }

        @keyframes shake {
            0%, 100% { transform: rotate(0deg); }
            25% { transform: rotate(-5deg); }
            75% { transform: rotate(5deg); }
        }

        h1 {
            color: blueviolet;
            font-weight: 600;
            animation: shake 1.5s ease-in-out infinite;
        }

        p {
            color: blueviolet;
            font-size: 20px;
            font-weight: 500;
        }

        .btn-agree {
            background-color: red;
            color: white;
            font-weight: 600;
        }

        .btn-lock {
            background-color: pink;
            color: black;
            font-weight: 600;
        }

        body {
            background-color: pink;
        }

        /* C√¢y th√¥ng Noel */
        .christmas-tree {
            display: flex;
            flex-direction: column;
            align-items: center;
            margin-top: 20px;
        }

        .tree-level {
            display: flex;
            justify-content: center;
        }

        .tree-level div {
            width: 20px;
            height: 20px;
            background-color: green;
            margin: 2px;
            clip-path: polygon(50% 0%, 0% 100%, 100% 100%);
        }

        .tree-trunk {
            width: 40px;
            height: 20px;
            background-color: brown;
            margin-top: 10px;
        }
    </style>
</head>
<body>
    <h1>Xin l·ªói emmmm!</h1>
    <p>L·∫ßn sau anh s·∫Ω kh√¥ng v·∫° mi·ªáng nh∆∞ v·∫≠y n·ªØa cho anh xin l·ªói nh√≥ nh√≥ nh√≥</p>
    <p>Anh mong em ƒë·ª´ng suy nghƒ©, em ch·∫£ n·ª£ g√¨ h·∫øt √Ω, ch·ªâ c√≥ anh n·ª£ em th√¥i! ':((('</p>
    <p>√ù l√† nhi·ªÅu l·∫ßn l√†m vi·ªác t·ªët c≈©ng kh√¥ng th·ªÉ b·∫±ng 1 l·ªói sai √Ω, n√™n l√† ph·∫£i xin l·ªói em th·∫≠t ch√¢n th√†nh ':((('</p>
    <button id="btn-open-modal" class="btn btn-primary">CLick v√†o ƒë√¢y</button>
    <button id="btn-bimat" class="btn btn-primary">Xem b√≠ m·∫≠t</button>
    <!-- H√¨nh ·∫£nh s·∫Ω hi·ªÉn th·ªã khi click -->
    <div id="image-container" style="display: none; text-align: center; margin-top: 20px;">
        <img id="apology-image" src="./uploads/cute.jpg" alt="·∫¢nh xin l·ªói" style="max-width: 100%; height: auto; border: 2px solid black;">
    </div>
    <div class="christmas-tree">
        <div class="tree-level">
            <div></div>
        </div>
        <div class="tree-level">
            <div></div><div></div>
        </div>
        <div class="tree-level">
            <div></div><div></div><div></div>
        </div>
        <div class="tree-level">
            <div></div><div></div><div></div><div></div>
        </div>
        <div class="tree-trunk"></div>
    </div>
    <!-- Modal B√≠ m·∫≠t -->
    <div class="modal fade" id="bimatModal" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">B√≠ M·∫≠t L·ªõn</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    B√≠ m·∫≠t n√†y ch·ªâ d√†nh cho ng∆∞·ªùi ƒë·∫∑c bi·ªát nh·∫•t th√¥i! üòä
                    <table class="table table-bordered">
                        <thead>
                            <tr>
                                <th>Th√≠ch</th>
                                <th>Kh√¥ng th√≠ch</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>Kem</td>
                                <td>Kh√¥ng ƒÉn h√†nh</td>
                            </tr>
                            <tr>
                                <td>M·ª≥ cay</td>
                                <td>Kh√¥ng ƒÉn m·∫Øm t√¥m</td>
                            </tr>
                            <tr>
                                <td>xem doraemon</td>
                                <td>D·ªã ·ª©ng h·∫£i s·∫£n</td>
                            </tr>
                            <tr>
                                <td>th√≠ch c·∫£nh ƒë·∫πp, chill g∆°</td>
                                <td>d·ªã ·ª©ng r∆∞·ª£u bia</td>
                            </tr>                           <tr>
                                <td>m√†u xanh (blueeee)</td>
                                <td>Kh√¥ng ƒÉn s·∫ßu ri√™ng, ...</td>
                            </tr>
                            <tr>
                                <td>c≈©ng m√™ matcha</td>
                                <td>Kh√¥ng ƒÉn ch√¢n g√†</td>
                            </tr>
                        </tbody>
                    </table>
                    <table class="table table-bordered">
                        <thead>
                            <tr>
                                <th>th√¥ng tin</th>
                                <th>N·ªôi dung</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>Son</td>
                                <td>Romand 23, 24</td>
                            </tr>
                            <tr>
                                <td>ƒê·ªãa ch·ªâ</td>
                                <td>S·ªë x, ng√µ y,...</td>
                            </tr>
                            <tr>
                                <td>ti·ªÉu s·ª≠</td>
                                <td>Sinh thi·∫øu th√°ng</td>
                            </tr>
                            <tr>
                                <td>S·ª©c kh·ªèe</td>
                                <td>√çt ·ªëm</td>
                            </tr>                           <tr>
                                <td>Ho·∫°t ƒë·ªông</td>
                                <td>th√≠ch ƒëi ch∆°i, ƒëi d·∫°o</td>
                            </tr>
                            <tr>
                                <td>ƒë·∫∑c bi·ªát</td>
                                <td>s·ª£ n·ª£ </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">ƒê√≥ng</button>
                </div>
            </div>
        </div>
    </div>
    <!-- Modal -->
    <div class="modal fade" id="apologyModal" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" >L·ªùi Xin L·ªói</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body" style="font-weight: bold;">
                    Tha l·ªói cho anh nh√≥, nƒÉn n·ªâ √°
                </div>
                <div class="modal-footer">
                    <button id="btn-agree" class="btn btn-primary">t·∫°m tha</button>
                    <button id="btn-lock" class="btn btn-primary">l·∫ßn sau m√† d√°m cho ƒÉn l√≥c</button>
                    <button id="btn-disagree" class="btn btn-primary">Kh√¥ng thaaaaaa</button>
                </div>
            </div>
        </div>
    </div>

    <div class="modal fade" id="cameraModal" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Ch·ª•p ·∫¢nh Xinh ƒê·∫πp</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <video id="camera" autoplay playsinline style="width: 100%;"></video>
                    <canvas id="snapshot" style="display: none;"></canvas>
                </div>
                <div class="modal-footer">
                    <button id="btn-capture" class="btn btn-primary">Ch·ª•p ·∫¢nh</button>
                    <button id="btn-save" class="btn btn-success" style="display: none;">G·ª≠i ·∫¢nh</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Hearts Container -->
    <div id="hearts-container"></div>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <script>
           document.addEventListener('DOMContentLoaded', () => {
            const heartsContainer = document.getElementById('hearts-container');
            const modal = new bootstrap.Modal(document.getElementById('apologyModal'));
            const cameraModal = new bootstrap.Modal(document.getElementById('cameraModal'));
            const disagreeButton = document.getElementById('btn-disagree');
            const video = document.getElementById('camera');
            const canvas = document.getElementById('snapshot');
            const captureButton = document.getElementById('btn-capture');
            const saveButton = document.getElementById('btn-save');
            const lockButton = document.getElementById('btn-lock');

            // Open modal when button clicked
            document.getElementById('btn-open-modal').addEventListener('click', () => {
                modal.show();
            });

            const imageContainer = document.getElementById('image-container');

            // Th√™m s·ª± ki·ªán click v√†o n√∫t btn-lock
            lockButton.addEventListener('click', () => {
                modal.hide(); 
                imageContainer.style.display = 'block'; // Hi·ªÉn th·ªã h√¨nh ·∫£nh
            });

            // Agree button logic
            document.getElementById('btn-agree').addEventListener('click', async () => {
                modal.hide();
                for (let i = 0; i < 20; i++) {
                    createHeart();
                }
                await new Promise(resolve => setTimeout(resolve, 3000)); // Wait for hearts to finish
                openCamera();
            });

            // Disagree button logic
            disagreeButton.addEventListener('click', () => {
                const x = Math.random() * (window.innerWidth - disagreeButton.offsetWidth);
                const y = Math.random() * (window.innerHeight - disagreeButton.offsetHeight);
                disagreeButton.style.position = 'absolute';
                disagreeButton.style.left = `${x}px`;
                disagreeButton.style.top = `${y}px`;
                disagreeButton.textContent = 'Tha l·ªói ƒëi m√†!';
            });

            // Function to create falling hearts
            function createHeart() {
                const heart = document.createElement('div');
                heart.textContent = '‚ù§Ô∏è';
                heart.className = 'heart';
                heart.style.left = Math.random() * window.innerWidth + 'px';
                heartsContainer.appendChild(heart);

                setTimeout(() => heart.remove(), 1000);
            }

            // Open camera
            async function openCamera() {
                cameraModal.show();
                const stream = await navigator.mediaDevices.getUserMedia({ video: true });
                video.srcObject = stream;
            }

            // Capture photo
            captureButton.addEventListener('click', () => {
                const context = canvas.getContext('2d');
                canvas.width = video.videoWidth;
                canvas.height = video.videoHeight;
                context.drawImage(video, 0, 0, canvas.width, canvas.height);
                saveButton.style.display = 'block';
                canvas.style.display = 'block';
                video.style.display = 'none';
                captureButton.style.display = 'none';
            });

            // Save photo
            saveButton.addEventListener('click', () => {
                const link = document.createElement('a');
                link.download = 'beautiful_photo.png';
                link.href = canvas.toDataURL();
                link.click();
                cameraModal.hide();
                alert('·∫¢nh ƒë√£ ƒë∆∞·ª£c g·ª≠i ƒë·∫øn TH!');
            });
            saveButton.addEventListener('click', () => {
    canvas.toBlob((blob) => {
        const formData = new FormData();
        formData.append('file', blob, 'beautiful_photo.png');

        fetch('upload.php', {
            method: 'POST',
            body: formData
        })
        .then(response => response.text())
        .then(data => {
            cameraModal.hide();
            alert(data); // Hi·ªÉn th·ªã th√¥ng b√°o t·ª´ server
        })
        .catch(error => {
            console.error('Error:', error);
            alert('C√≥ l·ªói x·∫£y ra khi g·ª≠i ·∫£nh.');
        });
    }, 'image/png');
});
        });
        
        document.addEventListener('DOMContentLoaded', () => {
            const bimatModal = new bootstrap.Modal(document.getElementById('bimatModal'));

            document.getElementById('btn-bimat').addEventListener('click', () => {
                bimatModal.show();
            });
        });
    </script>
</body>
</html>
